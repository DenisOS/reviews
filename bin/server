#!/usr/bin/env node

var http = require('http'),
    path = require('path'),
    fs = require('fs');

// createServer creates a server listening on port 8080 and the 
//  callback is called when requests are received.
//
http.createServer(function (req, res) {

	// if basename is index or '' then provide index.html
	// else return error
	//
	var lookup = path.basename(decodeURI(req.url));
	if (lookup === 'index' || lookup === '') {
		res.writeHead(200, {'Content-Type': 'text/html'});
		res.end(fs.readFileSync(__dirname + '/index.html'));
	} else {
		res.writeHead(404, {'Content-Type': 'text/html'});            //
		res.end('Sorry, Page Not Found!');    // write string passed and then end
	}
}).listen(8080);


console.log('> http server has started on port 8080');
